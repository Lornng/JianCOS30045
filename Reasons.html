<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8"/>
	<meta name="description"	content="Data Visualisation Exercise 1"/>
	<meta name="keywords"		  content="HTML, CSS"/>
	<meta name="author"			  content="Ahyoon Kim"/>

    <title>Task 7.1 Line and Area chart</title>

    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <nav>
        <a href="Home.html">Home</a>
        <a href="Countries.html">Countries</a>
        <a href="Reasons.html">Reasons</a>
      </nav>
    <h1>Migration Line Chart in India</h1>
    <p id = "chart"></p>
<script>
             
var w = 600;
var h = 600;
var padding = 100;
var dataset;
    // Load data from CSV file and parse it
    d3.csv("India.csv", function(d) {
        return {
        date: (+d.date),
        AnnualP: +d.AnnualP
      };
    }).then(function(data) {
      dataset = data;
  
      // Set x and y scales
      var xScale = d3.scaleLinear()
        .domain([
          d3.min(dataset, function(d) { return d.date; }),
          d3.max(dataset, function(d) { return d.date; })
        ])
        .range([padding, w - padding]);
        var yScale = d3.scaleLinear()
        .domain([0, d3.max(dataset, function(d) { return d.AnnualP; })])
        .range([h - padding, padding ]);
      
      // Set the line generator function
      var line = d3.line()
        .x(function(d) { return xScale(d.date); })
        .y(function(d) { return yScale(d.AnnualP); });
      // Add the area shape to the chart
      var area = d3.area()
        .x(function(d) { return xScale(d.date); })
        .y0(function() { return yScale.range()[0]; })
        .y1(function(d) { return yScale(d.AnnualP); });
      // Create the SVG element
      var svg = d3.select("#chart")
        .append("svg")
        .attr("width", w)
        .attr("height", h);
  
      svg.append("path")
        .datum(dataset)
        .attr("fill", "#FFD3D9")
        .attr("d", area);
  
      svg.append("path")
        .datum(dataset)
        .attr("fill", "none")
        .attr("stroke", "#7B4173FF")
        .attr("stroke-width", 2)
        .attr("d", line);
      // Add the x-axis and y-Axis to the chart
      var xAxis = d3.axisBottom(xScale)
      .ticks(5);
      svg.append("g")
        .attr("class", "axis x-axis")
        .attr("transform", "translate(0," + (h - padding) + ")")
        .call(xAxis);
  
      var yAxis = d3.axisLeft(yScale);
      svg.append("g")
        .attr("class", "axis y-axis")
        .attr("transform", "translate(" + padding + ",0)")
        .call(yAxis);
  
    });
</script>

<footer style="color:slategrey;"><br>COS30045 Data Visualisation<br>
        Ahyoon Kim</footer> 
        </body>
    </html>
